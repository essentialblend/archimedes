<!-- MainWindow -->
<Window x:Class="archimedes.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="archimedes" Height="720" Width="1280">
    
    <Window.Resources>

        <Geometry x:Key="Icon.CycleCollapse">M4,14 H10 V20 M20,10 H14 V4</Geometry>
        <Geometry x:Key="Icon.CyclePhaseHourglass">M6,4 L18,4 L12,11 L18,20 L6,20 L12,11 Z</Geometry>

        <Style x:Key="ZoneLabel" TargetType="TextBlock">
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="FontSize" Value="9"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="{DynamicResource Brush.Text.Dim}"/>
            <Setter Property="TextOptions.TextFormattingMode" Value="Display"/>
        </Style>

        <Style x:Key="TinyButton" TargetType="Button">
            <Setter Property="Height" Value="{DynamicResource Dim.WidgetHeight}"/>
            <Setter Property="MinWidth" Value="22"/>
            <Setter Property="Padding" Value="8,0"/>
            <Setter Property="FontSize" Value="9"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderBrush" Value="{DynamicResource Brush.Border.Light}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Foreground" Value="{DynamicResource Brush.Text.Dim}"/>
        </Style>

        <Style x:Key="CycleButton" TargetType="Button">
            <Setter Property="Width" Value="24"/>
            <Setter Property="Height" Value="24"/>
            <Setter Property="Padding" Value="0"/>
            <Setter Property="Background" Value="{DynamicResource Brush.CycleBtn.BG}"/>
            <Setter Property="BorderBrush" Value="{DynamicResource Brush.Acc.Main}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Foreground" Value="{DynamicResource Brush.Acc.Main}"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="3">
                            <ContentPresenter HorizontalAlignment="Center"
                                              VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="TransportSep" TargetType="Border">
            <Setter Property="Width" Value="1"/>
            <Setter Property="Height" Value="16"/>
            <Setter Property="Margin" Value="16,0"/>
            <Setter Property="Background" Value="{DynamicResource Brush.Border.Light}"/>
        </Style>

        <Style x:Key="ValueBox" TargetType="Border">
            <Setter Property="Width" Value="44"/>
            <Setter Property="Height" Value="{DynamicResource Dim.WidgetHeight}"/>
            <Setter Property="Background" Value="{DynamicResource Brush.Input.BG}"/>
            <Setter Property="CornerRadius" Value="2"/>
            <Setter Property="Padding" Value="6,0"/>
        </Style>

        <Style x:Key="ValueMono" TargetType="TextBlock">
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="FontFamily" Value="Cascadia Mono"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="TextAlignment" Value="Right"/>
            <Setter Property="Foreground" Value="{DynamicResource Brush.Text.Main}"/>
            <Setter Property="TextOptions.TextFormattingMode" Value="Display"/>
        </Style>

        <Style x:Key="SigInput" TargetType="TextBox">
            <Setter Property="Width" Value="20"/>
            <Setter Property="Height" Value="{DynamicResource Dim.WidgetHeight}"/>
            <Setter Property="Background" Value="{DynamicResource Brush.Input.BG}"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="FontFamily" Value="Cascadia Mono"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="TextAlignment" Value="Center"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="Padding" Value="0"/>
            <Setter Property="Foreground" Value="{DynamicResource Brush.Text.Main}"/>
            <Setter Property="CaretBrush" Value="{DynamicResource Brush.Text.Main}"/>
        </Style>

        <Style x:Key="MetroToggle" TargetType="ToggleButton">
            <Setter Property="Width" Value="30"/>
            <Setter Property="Height" Value="{DynamicResource Dim.WidgetHeight}"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderBrush" Value="{DynamicResource Brush.Border.Light}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ToggleButton">
                        <Border x:Name="Bd"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="3">
                            <StackPanel Orientation="Horizontal"
                                        HorizontalAlignment="Center"
                                        VerticalAlignment="Center">
                                <Ellipse Width="5" Height="5"
                                         Stroke="{DynamicResource Brush.Acc.Main}"
                                         StrokeThickness="1"
                                         Opacity="0.4"/>
                                <Ellipse Width="5" Height="5"
                                         Stroke="{DynamicResource Brush.Acc.Main}"
                                         StrokeThickness="1"
                                         Opacity="0.4"
                                         Margin="3,0,0,0"/>
                            </StackPanel>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsChecked" Value="True">
                                <Setter TargetName="Bd" Property="BorderBrush" Value="{DynamicResource Brush.Acc.Main}"/>
                                <Setter TargetName="Bd" Property="Background" Value="{DynamicResource Brush.CycleBtn.BG}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Geometry x:Key="Icon.DeckPlay">M6,5 V19 L18,12 Z</Geometry>
        <Geometry x:Key="Icon.DeckResetDiamond">M12,3 L20,12 L12,21 L4,12 Z</Geometry>
        <Geometry x:Key="Icon.DeckHushFill">M5,5 H9 V19 H5 Z M15,5 H19 V19 H15 Z</Geometry>
        <Geometry x:Key="Icon.DeckHushSlash">M4,4 L20,20</Geometry>

        <Style x:Key="DeckBorder" TargetType="Border">
            <Setter Property="Height" Value="28"/>
            <Setter Property="Padding" Value="2"/>
            <Setter Property="CornerRadius" Value="4"/>
            <Setter Property="Background" Value="{DynamicResource Brush.BG.Body}"/>
            <Setter Property="BorderBrush" Value="{DynamicResource Brush.Border.Light}"/>
            <Setter Property="BorderThickness" Value="1"/>
        </Style>

        <Style x:Key="DeckSep" TargetType="Border">
            <Setter Property="Width" Value="1"/>
            <Setter Property="Height" Value="14"/>
            <Setter Property="Margin" Value="4,0"/>
            <Setter Property="Background" Value="{DynamicResource Brush.Border.Light}"/>
        </Style>

        <Style x:Key="DeckButton" TargetType="Button">
            <Setter Property="Width" Value="36"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Foreground" Value="{DynamicResource Brush.Text.Main}"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="Bd" Background="{TemplateBinding Background}" CornerRadius="3">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="Bd" Property="Background" Value="{DynamicResource Brush.BG.Hover}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="DeckButtonHush" TargetType="Button" BasedOn="{StaticResource DeckButton}">
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Foreground" Value="{DynamicResource Brush.Acc.Red}"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <Style x:Key="ScaleComboItem" TargetType="ComboBoxItem">
            <Setter Property="Padding" Value="8,2"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="{DynamicResource Brush.Text.Main}"/>
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ComboBoxItem">
                        <Border x:Name="ItemBd"
                                Background="{TemplateBinding Background}"
                                CornerRadius="2">
                            <ContentPresenter Margin="{TemplateBinding Padding}"
                                              HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                              VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsHighlighted" Value="True">
                                <Setter TargetName="ItemBd" Property="Background" Value="{DynamicResource Brush.BG.Hover}"/>
                            </Trigger>
                            <Trigger Property="IsSelected" Value="True">
                                <Setter TargetName="ItemBd" Property="Background" Value="{DynamicResource Brush.CycleBtn.BG}"/>
                                <Setter Property="Foreground" Value="{DynamicResource Brush.Acc.Main}"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="Opacity" Value="0.5"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="ScaleCombo" TargetType="ComboBox">
            <Setter Property="Height" Value="{DynamicResource Dim.WidgetHeight}"/>
            <Setter Property="MinWidth" Value="48"/>
            <Setter Property="Padding" Value="8,0"/>
            <Setter Property="FontSize" Value="11"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Background" Value="{DynamicResource Brush.Input.BG}"/>
            <Setter Property="BorderBrush" Value="{DynamicResource Brush.Border.Light}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Foreground" Value="{DynamicResource Brush.Text.Main}"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="ItemContainerStyle" Value="{StaticResource ScaleComboItem}"/>
            <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Disabled"/>
            <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Auto"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ComboBox">
                        <Grid>
                            <ToggleButton x:Name="Toggle"
                                          Focusable="False"
                                          IsChecked="{Binding IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}"
                                          ClickMode="Press"
                                          Background="{TemplateBinding Background}"
                                          BorderBrush="{TemplateBinding BorderBrush}"
                                          BorderThickness="{TemplateBinding BorderThickness}"
                                          Padding="{TemplateBinding Padding}">
                                <ToggleButton.Template>
                                    <ControlTemplate TargetType="ToggleButton">
                                        <Border x:Name="Bd"
                                                Background="{TemplateBinding Background}"
                                                BorderBrush="{TemplateBinding BorderBrush}"
                                                BorderThickness="{TemplateBinding BorderThickness}"
                                                CornerRadius="3">
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="18"/>
                                                </Grid.ColumnDefinitions>
                                                <ContentPresenter Grid.Column="0"
                                                                  Margin="{TemplateBinding Padding}"
                                                                  VerticalAlignment="Center"
                                                                  HorizontalAlignment="Left"
                                                                  Content="{Binding SelectionBoxItem, RelativeSource={RelativeSource AncestorType=ComboBox}}"
                                                                  ContentTemplate="{Binding SelectionBoxItemTemplate, RelativeSource={RelativeSource AncestorType=ComboBox}}"
                                                                  ContentTemplateSelector="{Binding ItemTemplateSelector, RelativeSource={RelativeSource AncestorType=ComboBox}}"
                                                                  TextElement.Foreground="{Binding Foreground, RelativeSource={RelativeSource AncestorType=ComboBox}}"/>
                                                <Path Grid.Column="1"
                                                      Width="8" Height="4"
                                                      Margin="0,0,6,0"
                                                      VerticalAlignment="Center"
                                                      HorizontalAlignment="Center"
                                                      Data="M 0 0 L 4 4 L 8 0 Z"
                                                      Fill="{DynamicResource Brush.Text.Dim}"/>
                                            </Grid>
                                        </Border>
                                    </ControlTemplate>
                                </ToggleButton.Template>
                            </ToggleButton>

                            <Popup x:Name="PART_Popup"
                                   Placement="Bottom"
                                   IsOpen="{TemplateBinding IsDropDownOpen}"
                                   AllowsTransparency="True"
                                   Focusable="False"
                                   PopupAnimation="Fade">
                                <Border x:Name="DropDownBorder"
                                        MinWidth="{TemplateBinding ActualWidth}"
                                        Background="{DynamicResource Brush.BG.Menu}"
                                        BorderBrush="{TemplateBinding BorderBrush}"
                                        BorderThickness="{TemplateBinding BorderThickness}"
                                        CornerRadius="3"
                                        Padding="2">
                                    <ScrollViewer Margin="0" CanContentScroll="True">
                                        <ItemsPresenter/>
                                    </ScrollViewer>
                                </Border>
                            </Popup>
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="Toggle" Property="Background" Value="{DynamicResource Brush.BG.Hover}"/>
                            </Trigger>
                            <Trigger Property="IsDropDownOpen" Value="True">
                                <Setter TargetName="Toggle" Property="Background" Value="{DynamicResource Brush.BG.Active}"/>
                                <Setter TargetName="Toggle" Property="BorderBrush" Value="{DynamicResource Brush.Acc.Main}"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="Opacity" Value="0.5"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="RightSep" TargetType="Border">
            <Setter Property="Width" Value="1"/>
            <Setter Property="Height" Value="16"/>
            <Setter Property="Margin" Value="20,0"/>
            <Setter Property="Background" Value="{DynamicResource Brush.Border.Light}"/>
        </Style>

        <Style x:Key="CycleWrapValBox" TargetType="Border">
            <Setter Property="MinWidth" Value="80"/>
            <Setter Property="Height" Value="{DynamicResource Dim.WidgetHeight}"/>
            <Setter Property="BorderBrush" Value="{DynamicResource Brush.Border.Light}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="CornerRadius" Value="3"/>
            <Setter Property="Padding" Value="6,0"/>
        </Style>

        <Style x:Key="CycleWrapValText" TargetType="TextBlock">
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="FontFamily" Value="Cascadia Mono"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Foreground" Value="{DynamicResource Brush.Acc.Main}"/>
            <Setter Property="TextAlignment" Value="Right"/>
        </Style>

        <Style x:Key="DspBox" TargetType="Border">
            <Setter Property="Width" Value="90"/>
            <Setter Property="Height" Value="{DynamicResource Dim.WidgetHeight}"/>
            <Setter Property="CornerRadius" Value="3"/>
            <Setter Property="Background" Value="{DynamicResource Brush.BG.Hover}"/>
            <Setter Property="BorderBrush" Value="{DynamicResource Brush.Border.Light}"/>
            <Setter Property="BorderThickness" Value="1"/>
        </Style>

        <Style x:Key="DspFill" TargetType="Border">
            <Setter Property="Background" Value="{DynamicResource Brush.Acc.Green}"/>
        </Style>

        <Style x:Key="DspText" TargetType="TextBlock">
            <Setter Property="FontFamily" Value="Cascadia Mono"/>
            <Setter Property="FontSize" Value="9"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Foreground" Value="{DynamicResource Brush.Text.Main}"/>
            <Setter Property="HorizontalAlignment" Value="Center"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
        </Style>

        <Geometry x:Key="Icon.ThemeMoon">M21,12.79 A9,9 0 1 1 11.21,3 A7,7 0 0 0 21,12.79 Z</Geometry>

        <Style x:Key="IconButton" TargetType="Button">
            <Setter Property="Width" Value="22"/>
            <Setter Property="Height" Value="22"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Foreground" Value="{DynamicResource Brush.Text.Dim}"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="Bd" CornerRadius="3" Background="{TemplateBinding Background}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="Bd" Property="Background" Value="{DynamicResource Brush.BG.Hover}"/>
                                <Setter Property="Foreground" Value="{DynamicResource Brush.Text.Main}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

    </Window.Resources>

    <Grid Background="{DynamicResource Brush.BG.Body}">
        <Grid.RowDefinitions>
            <RowDefinition Height="{DynamicResource Dim.BarHeight}"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <Border Grid.Row="0"
                Background="{DynamicResource Brush.BG.Bar}"
                BorderBrush="{DynamicResource Brush.Border.Light}"
                BorderThickness="0,0,0,1">
            <Grid Margin="12,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <Button Grid.Column="0" Style="{StaticResource CycleButton}" Margin="0,0,16,0">
                    <Viewbox Width="14" Height="14" Stretch="Uniform">
                        <Path Data="{StaticResource Icon.CycleCollapse}"
                              Stroke="{DynamicResource Brush.Acc.Main}"
                              StrokeThickness="2"
                              StrokeStartLineCap="Round"
                              StrokeEndLineCap="Round"
                              StrokeLineJoin="Round">
                            <Path.RenderTransform>
                                <TranslateTransform X="-1.5" Y="-1.5"/>
                            </Path.RenderTransform>
                        </Path>
                    </Viewbox>
                </Button>

                <StackPanel Grid.Column="1"
                            Orientation="Horizontal"
                            VerticalAlignment="Center"
                            Margin="8,0,0,0">

                    <Button Style="{StaticResource TinyButton}" Content="EXT"/>
                    <Button Style="{StaticResource TinyButton}" Content="TAP" Margin="6,0,0,0"/>

                    <Border Style="{StaticResource TransportSep}"/>

                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                        <TextBlock Style="{StaticResource ZoneLabel}" Text="BPM" Margin="0,0,4,0"/>
                        <Border Style="{StaticResource ValueBox}">
                            <TextBlock Style="{StaticResource ValueMono}" Text="135"/>
                        </Border>

                        <TextBlock Style="{StaticResource ZoneLabel}" Text="CPS" Margin="10,0,4,0"/>
                        <Border Style="{StaticResource ValueBox}">
                            <TextBlock Style="{StaticResource ValueMono}" Text="0.56"/>
                        </Border>
                    </StackPanel>

                    <Border Style="{StaticResource TransportSep}"/>

                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                        <TextBox Style="{StaticResource SigInput}" Text="4"/>
                        <TextBlock Text="/"
                                   VerticalAlignment="Center"
                                   Foreground="{DynamicResource Brush.Text.Dim}"
                                   Margin="2,0"/>
                        <TextBox Style="{StaticResource SigInput}" Text="4"/>
                        <ToggleButton Style="{StaticResource MetroToggle}" Margin="10,0,0,0"/>
                    </StackPanel>

                    <Border Style="{StaticResource TransportSep}"/>

                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                        <ComboBox Style="{StaticResource ScaleCombo}" SelectedIndex="0">
                            <ComboBoxItem Content="C"/>
                            <ComboBoxItem Content="D"/>
                        </ComboBox>

                        <ComboBox Style="{StaticResource ScaleCombo}" MinWidth="80" Margin="6,0,0,0" SelectedIndex="0">
                            <ComboBoxItem Content="Minor"/>
                            <ComboBoxItem Content="Major"/>
                        </ComboBox>
                    </StackPanel>
                </StackPanel>

                <Border Style="{StaticResource TransportSep}"/>

                <Border Grid.Column="2" Style="{StaticResource DeckBorder}" Margin="0,0,16,0" VerticalAlignment="Center">
                    <StackPanel Orientation="Horizontal">
                        <Button Style="{StaticResource DeckButton}">
                            <Viewbox Width="14" Height="14" Stretch="Uniform">
                                <Canvas Width="24" Height="24">
                                    <Path Data="{StaticResource Icon.DeckResetDiamond}"
                                          Stroke="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}"
                                          StrokeThickness="2"
                                          StrokeLineJoin="Round"/>
                                    <Ellipse Width="4" Height="4" Canvas.Left="10" Canvas.Top="10"
                                             Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}"/>
                                </Canvas>
                            </Viewbox>
                        </Button>

                        <Border Style="{StaticResource DeckSep}"/>

                        <Button Style="{StaticResource DeckButton}">
                            <Viewbox Width="14" Height="14" Stretch="Uniform">
                                <Canvas Width="24" Height="24">
                                    <Rectangle Width="12" Height="12" RadiusX="1" RadiusY="1"
                                               Canvas.Left="6" Canvas.Top="6"
                                               Stroke="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}"
                                               StrokeThickness="2.5"/>
                                </Canvas>
                            </Viewbox>
                        </Button>

                        <Border Style="{StaticResource DeckSep}"/>

                        <Button Style="{StaticResource DeckButton}">
                            <Viewbox Width="14" Height="14" Stretch="Uniform">
                                <Canvas Width="24" Height="24">
                                    <Path Data="{StaticResource Icon.DeckPlay}"
                                          Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}"/>
                                </Canvas>
                            </Viewbox>
                        </Button>

                        <Border Style="{StaticResource DeckSep}"/>

                        <Button Style="{StaticResource DeckButton}">
                            <Viewbox Width="14" Height="14" Stretch="Uniform">
                                <Canvas Width="24" Height="24">
                                    <Ellipse Width="14" Height="14" Canvas.Left="5" Canvas.Top="5"
                                             Stroke="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}"
                                             StrokeThickness="2.5"/>
                                    <Ellipse Width="5" Height="5" Canvas.Left="9.5" Canvas.Top="9.5"
                                             Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}"/>
                                </Canvas>
                            </Viewbox>
                        </Button>

                        <Border Style="{StaticResource DeckSep}"/>

                        <Button Style="{StaticResource DeckButtonHush}">
                            <Viewbox Width="14" Height="14">
                                <Canvas Width="24" Height="24">
                                    <Grid>
                                        <Path Data="{StaticResource Icon.DeckHushFill}"
                                              Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}"
                                              Opacity="0.8"/>
                                        <Path Data="{StaticResource Icon.DeckHushSlash}"
                                              Stroke="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}"
                                              StrokeThickness="2"/>
                                    </Grid>
                                </Canvas>
                            </Viewbox>
                        </Button>
                    </StackPanel>
                </Border>

                <StackPanel Grid.Column="3"
                            Orientation="Horizontal"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Center">

                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                        <Viewbox Width="15" Height="15" Margin="0,0,6,0" Stretch="Uniform" VerticalAlignment="Center">
                            <Canvas Width="24" Height="24">
                                <Path Data="{StaticResource Icon.CyclePhaseHourglass}"
                                      Stroke="{DynamicResource Brush.Text.Dim}"
                                      StrokeThickness="2"
                                      StrokeLineJoin="Round"
                                      StrokeStartLineCap="Round"
                                      StrokeEndLineCap="Round"
                                      Fill="Transparent"/>
                            </Canvas>
                        </Viewbox>

                        <Border Style="{StaticResource CycleWrapValBox}">
                            <TextBlock Style="{StaticResource CycleWrapValText}" Text="0.0"/>
                        </Border>
                    </StackPanel>

                    <Border Style="{StaticResource RightSep}"/>

                    <Border Style="{StaticResource DspBox}">
                        <Grid ClipToBounds="True">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Border Grid.Column="0" Style="{StaticResource DspFill}"/>
                            <TextBlock Grid.ColumnSpan="2" Style="{StaticResource DspText}" Text="50%"/>
                        </Grid>
                    </Border>

                    <Border Style="{StaticResource RightSep}"/>

                    <Button Style="{StaticResource IconButton}"
                            Click="OnBootTidal"
                            ToolTip="Turn Tidal Cycles On"
                            Margin="0,0,20,0">
                        <Image Width="18" Height="18" Stretch="Uniform" Source="/Assets/Logo.png"/>
                    </Button>

                    <Button Style="{StaticResource IconButton}" Click="OnToggleTheme" ToolTip="Toggle Theme">
                        <Viewbox Width="14" Height="14">
                            <Path Data="{StaticResource Icon.ThemeMoon}"
                                  Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}"/>
                        </Viewbox>
                    </Button>
                </StackPanel>

            </Grid>
        </Border>

        <Border Grid.Row="1" Background="{DynamicResource Brush.BG.Panel}">
            <TextBlock Text="EDITOR AREA (next)"
                       Foreground="{DynamicResource Brush.Text.Dim}"
                       VerticalAlignment="Center"
                       HorizontalAlignment="Center"/>
        </Border>
    </Grid>
</Window>
